# Toilet flush for ATOM

## 概要
配管上の問題でトイレ詰まりをよく起こすトイレにおいて、使用後に詰まり防止目的で流すため、流す（大）実行後、一定時間たったら（タンクに水がたまるのを待つ）、再度タイマーでトイレを流す（大）。

## 対象機材（トイレ）
* リモコンで流す動作可能なシャワートイレ (プレアス DT-CL114A・CH184A用リモコンで確認)  
  (リモコンのコマンドが異なる場合、赤外線コマンド学習モードで解析する必要があります。)

## 必要機材（このプログラムを動作させるのに使用する機材）
* M5Atom Lite
* M5Stack用赤外線送受信ユニット [U002] (必須ではないが使用を推奨、送信コマンドを赤外線センサで解析する必要がある場合は必要・本体の赤外線LEDからのコマンドが弱くて使えない場合も必要)

## 機能
### 基本動作
1. 指定された赤外線コマンド（流す（大））を待つ。
2. 指定された赤外線コマンド（流す（大））を受信したら、120秒間カウントダウンして赤外線コマンド（流す（大））を送信しトイレを流す。 
### 手動操作
5. ボタンを1回押すと手動でカウントダウン開始・もう一度押すとカウントダウン停止。
6. ボタンを長押しすると（３秒間）即時に赤外線コマンド（流す（大））を送信しトイレを流す。
### 赤外線コマンド学習モード
7. ボタンを押しながらリセットで赤外線コマンド学習モードを起動(リモコンから赤外線センサーにコマンドを送って記憶させる。赤外線受信したらLEDが2秒間点灯。ボタン押下で送信テスト・ボタン長押しで保存して通常モードへ移行)

## 設置
* トイレに座った時にM5Atom Lite が見え、ボタンが押しやすい位置に両面テープなどで固定する。
* M5Stack用赤外線送受信ユニットはトイレのリモコンの赤外線が確実に受信でき、トイレに赤外線を送信できる位置に両面テープなどで固定する。

